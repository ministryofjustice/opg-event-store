(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7742],{33198:function(e,t,n){var r=/^\s+|\s+$/g,a=/^[-+]0x[0-9a-f]+$/i,s=/^0b[01]+$/i,i=/^0o[0-7]+$/i,l=parseInt,o="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g,c="object"==typeof self&&self&&self.Object===Object&&self,d=o||c||Function("return this")(),u=Object.prototype.toString,f=Math.max,m=Math.min,v=function(){return d.Date.now()};function x(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function p(e){if("number"==typeof e)return e;if(function(e){return"symbol"==typeof e||function(e){return!!e&&"object"==typeof e}(e)&&"[object Symbol]"==u.call(e)}(e))return NaN;if(x(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=x(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(r,"");var n=s.test(e);return n||i.test(e)?l(e.slice(2),n?2:8):a.test(e)?NaN:+e}e.exports=function(e,t,n){var r,a,s,i,l,o,c=0,d=!1,u=!1,h=!0;if("function"!=typeof e)throw new TypeError("Expected a function");function b(t){var n=r,s=a;return r=a=void 0,c=t,i=e.apply(s,n)}function y(e){return c=e,l=setTimeout(j,t),d?b(e):i}function g(e){var n=e-o;return void 0===o||n>=t||n<0||u&&e-c>=s}function j(){var e=v();if(g(e))return N(e);l=setTimeout(j,function(e){var n=t-(e-o);return u?m(n,s-(e-c)):n}(e))}function N(e){return l=void 0,h&&r?b(e):(r=a=void 0,i)}function w(){var e=v(),n=g(e);if(r=arguments,a=this,o=e,n){if(void 0===l)return y(o);if(u)return l=setTimeout(j,t),b(o)}return void 0===l&&(l=setTimeout(j,t)),i}return t=p(t)||0,x(n)&&(d=!!n.leading,s=(u="maxWait"in n)?f(p(n.maxWait)||0,t):s,h="trailing"in n?!!n.trailing:h),w.cancel=function(){void 0!==l&&clearTimeout(l),c=0,r=o=a=l=void 0},w.flush=function(){return void 0===l?i:N(v())},w}},53099:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/visualiser",function(){return n(59010)}])},59010:function(e,t,n){"use strict";n.r(t),n.d(t,{__N_SSG:function(){return j}});var r=n(85034),a=n(70169),s=n(46131),i=n(24246),l=n(27378),o=n(88038),c=n.n(o),d=n(86677),u=n(33198),f=n.n(u),m=n(45604),v=n(90476),x=n(6010),p=n(41978),h=function(e,t){return t.filter((function(t){return t.name.indexOf(e)>-1}))};function b(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.filter(Boolean).join(" ")}function y(e){var t=e.title,n=e.data,r=e.currentSelectedItem,a=e.onClick,s=e.filterBy,o=e.type,c=(0,l.useState)(n)[0];return(0,i.jsxs)("div",{children:[(0,i.jsxs)("span",{className:"font-bold block py-2",children:[t," "," ",s&&(0,i.jsxs)(i.Fragment,{children:["(",n.length,"/",c.length,")"]}),!s&&(0,i.jsxs)(i.Fragment,{children:["(",c.length,")"]})]}),0===n.length&&(0,i.jsxs)("span",{className:"text-sm text-gray-300",children:["No ",o,"s found"]}),(0,i.jsx)("ul",{className:"space-y-4 overflow-auto",children:n.map((function(e){var t=!!r&&r.label===e.name,n=function(e){return null!=e.domain}(e)?"".concat(e.domain,"-").concat(e.name,"}"):e.name;return(0,i.jsx)(g,{type:o,data:e,onClick:function(e){return a(e,o)},isSelected:t},n)}))})]})}function g(e){var t=e.data,n=e.onClick,r=e.type,a=e.isSelected,s=a?"border-green-500 bg-green-50 shadow-md ":"";return(0,i.jsx)("li",{className:"flex",children:(0,i.jsxs)("button",{type:"button",onClick:function(){return n(t,r)},className:"flex shadow-sm rounded-md w-full text-left border ".concat(s),children:[(0,i.jsx)("div",{style:{background:(0,p.Z)(t.name)},className:b("bg-red-500","flex-shrink-0 flex h-full items-center justify-center w-4 text-white text-sm font-medium rounded-l-md")}),(0,i.jsx)("div",{className:"w-full rounded-r-md border-t border-r border-b ".concat(a?"bg-green-50":"bg-white"),children:(0,i.jsxs)("div",{className:"p-4 text-sm space-y-2 flex flex-col justify-between h-full",children:[(0,i.jsx)("div",{className:"text-gray-900 font-bold hover:text-gray-600 break-all text-xs xl:text-md",children:t.name}),(0,i.jsx)("div",{className:"hidden xl:block text-gray-500 text-xs font-normal mt-2 ",children:t.summary})]})})]})})}var j=!0;t.default=function(e){var t=e.events,n=e.services,o=e.domains,u=(0,v.ZR)().title,g=(0,l.useState)(""),j=g[0],N=g[1],w=(0,l.useState)(),k=w[0],S=w[1],E=(0,l.useState)({events:t,services:n,domains:o}),Z=E[0],_=E[1],C=(0,d.useRouter)(),O=C.query,A=C.isReady,T=O.name,B=O.type,D=(0,s.Z)(t.map((function(e){return(0,a.Z)((0,r.Z)({},e),{type:"event",label:"Event: ".concat(e.name)})}))).concat((0,s.Z)(n.map((function(e){return(0,a.Z)((0,r.Z)({},e),{type:"service",label:"Service: ".concat(e.name)})}))),(0,s.Z)(o.map((function(e){return(0,a.Z)((0,r.Z)({},e),{type:"domain",label:"Domain: ".concat(e.name)})})))),F=[{title:"Domains",type:"domain",data:Z.domains},{title:"Events",type:"event",data:Z.events},{title:"Services",type:"service",data:Z.services}],I=function(e,t){C.push({query:"type=".concat(t,"&name=").concat(e.name)}),S({label:e.name,data:e,type:t})},R=(0,l.useCallback)(f()((function(e){N(e.target.value)}),500),[Z]),W=(0,l.useCallback)((function(){return j?{events:h(j,t),services:h(j,n),domains:h(j,o)}:{events:t,services:n,domains:o}}),[t,n,o,j]);return(0,l.useEffect)((function(){var e=W();_(e)}),[j,W]),(0,l.useEffect)((function(){if(A){var e=t[0],r={label:e.name,type:"event",data:e};if(T&&B)if("all"!==B){var a={event:t,service:n,domain:o}[B.toString()].find((function(e){return e.name===T})),s=a?{label:a.name,type:B,data:a}:r;S(s)}else S({label:"All Events and Services",data:{name:"All Events and Services",events:t,services:n},type:"all"});else S(r)}}),[T,B,t,o,n,A]),(0,i.jsxs)("div",{className:"h-screen overflow-hidden",children:[(0,i.jsx)(c(),{children:(0,i.jsxs)("title",{children:[u," - Visualiser"]})}),(0,i.jsx)("div",{className:"sm:hidden px-4 py-2 bg-gray-200 border-b border-gray-300",children:(0,i.jsx)("div",{className:"relative rounded-md shadow-sm",children:(0,i.jsxs)("select",{className:" block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm rounded-md",onChange:function(e){var t=e.target.value,n=JSON.parse(t);S(n)},children:[(0,i.jsx)("option",{children:"Please select your event or service"}),D.map((function(e){return(0,i.jsx)("option",{value:JSON.stringify({label:e.name,data:e,type:e.type}),children:e.label},e.name)}))]})})}),(0,i.jsxs)("div",{className:"grid grid-cols-8 xl:grid-cols-6",children:[(0,i.jsxs)("div",{className:"hidden sm:block col-span-2 xl:col-span-1 bg-white px-4 h-screen overflow-auto border-r-2 shadow-md border-gray-200 py-3",children:[(0,i.jsx)("div",{className:"border-b border-gray-200 pb-6",children:(0,i.jsxs)("div",{className:"mt-1 relative rounded-md shadow-sm",children:[(0,i.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:(0,i.jsx)(m.Z,{className:"h-5 w-5 text-gray-400","aria-hidden":"true"})}),(0,i.jsx)("input",{type:"text",name:"event",id:"event",onChange:R,placeholder:"Find Event, Service or Domain",className:"focus:ring-gray-500 focus:border-gray-500 block w-full pl-10 sm:text-sm border-gray-300 rounded-md"})]})}),(0,i.jsxs)("div",{className:"space-y-6",children:[(0,i.jsx)("div",{className:"flex",children:(0,i.jsxs)("button",{type:"button",className:"flex shadow-sm rounded-md w-full text-left border",onClick:function(){return C.push({query:"type=all&name=AllEventsAndServices"}),void S({label:"All Events and Services",data:{name:"All Events and Services",events:t,services:n},type:"all"})},children:[(0,i.jsx)("div",{className:b("bg-blue-500","flex-shrink-0 flex h-full items-center justify-center w-4 text-white text-sm font-medium rounded-l-md")}),(0,i.jsx)("div",{className:"w-full rounded-r-md border-t border-r border-b ".concat("all"===(null===k||void 0===k?void 0:k.type)?"bg-green-50":"bg-white"),children:(0,i.jsxs)("div",{className:"p-4 text-sm space-y-2 flex flex-col justify-between h-full",children:[(0,i.jsx)("div",{className:"text-gray-900 font-bold hover:text-gray-600 break-all text-xs xl:text-md",children:"All Events and Services"}),(0,i.jsx)("div",{className:"hidden xl:block text-gray-500 text-xs font-normal mt-2 ",children:"Diagram that shows all your events and services in one place"})]})})]})}),F.map((function(e){return(0,i.jsx)(y,{title:e.title,filterBy:j,data:e.data,currentSelectedItem:k,type:e.type,onClick:I},e.title)}))]})]}),(0,i.jsx)("div",{className:"bg-gray-200 h-screen col-span-12 sm:col-span-6 xl:col-span-5",children:k&&(0,i.jsx)(x.Z,{source:k.type,data:k.data,title:"Visualiser",subtitle:"".concat(k.data.name," (").concat(k.type,")"),rootNodeColor:(0,p.Z)(k.label),fitView:!0,isAnimated:!0,isDraggable:!0,includeBackground:!0,renderWithBorder:!1,maxHeight:"100%",includeEdgeLabels:!0,includeNodeIcons:!0})})]})]})}},45604:function(e,t,n){"use strict";var r=n(27378);const a=r.forwardRef((function(e,t){return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:2,stroke:"currentColor","aria-hidden":"true",ref:t},e),r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"}))}));t.Z=a}},function(e){e.O(0,[5454,2749,3636,9774,2888,179],(function(){return t=53099,e(e.s=t);var t}));var t=e.O();_N_E=t}]);